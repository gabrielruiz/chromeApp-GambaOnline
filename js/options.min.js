function showPage(){$("body").show()}function init(){var a=window.navigator.language||navigator.browserLanguage,b;if(a.match(/en\-.+/)){b="en-US"}else{b="es-AR"}return $.getJSON("../languages/"+b+".json")}function storageLocalSet(a){chrome.storage.local.set({volume:a.volume,sync:a.sync},function(){if(a.oldValue&&a.newValue){console.log("Volume changed from "+a.oldValue+" to "+a.newValue)}else{console.log("Local storage volume set to "+a.volume+".");console.log("Local storage setting sync = "+a.sync+".")}})}function storageSyncSet(a){chrome.storage.sync.set({volume:a.volume},function(){if(a.oldValue&&a.newValue){console.log("Sync storage saved. Old value: "+a.oldValue+" |  New Value: "+a.newValue)}else{console.log("Sync storage saved.")}})}$(document).ready(function(){init().then(function(e){var d=e,a=new Date(),f=$("#volume-value"),b=$("#volume-sync-value");$("#options-page-title").html(d.OPTIONS.SETTING_PAGE_TITLE);$("#setting-title").html(d.OPTIONS.SETTING_TITLE+":");$("#volume-option").html(d.OPTIONS.VOLUME_OPTION);$("#volume-sync-option").html(d.OPTIONS.VOLUME_SYNC_VALUE);$("#volume-sync-value").attr("title",d.OPTIONS.VOLUME_SYNC_TITLE_ATTR);$("#resetBtn").html(d.OPTIONS.RESET_BUTTON);$("#copyright").html(a.getFullYear()+" "+d.OPTIONS.COPYRIGHT_TEXT+" - ");function c(g){var h=g.volume;if(typeof h==="undefined"){h=70}else{if(h>0){h=h*100;b.attr("checked",true)}}showPage();f.slider({id:"volumeSlider",min:0,max:100,step:1,value:h,tooltip:"always"})}chrome.storage.local.get("sync",function(g){if(typeof g.sync==="undefined"||g.sync){console.log("Loading Volume from Sync Storage.");chrome.storage.sync.get("volume",c)}else{console.log("Loading Volume from Local Storage.");chrome.storage.local.get("volume",c)}});f.bind("change",function(h){var g=h.value.newValue/100;chrome.storage.local.get("sync",function(j){var i={volume:g,oldValue:h.value.oldValue,newValue:h.value.newValue};if(j.sync){storageSyncSet(i);i.sync=true;storageLocalSet(i)}else{i.sync=false;storageLocalSet(i)}})});b.bind("change",function(i){var h=f.slider("getValue")/100,g={volume:h};if(i.target.checked){storageSyncSet(g);g.sync=true;storageLocalSet(g)}else{g.sync=false;storageLocalSet(g)}});$("#resetBtn").click(function(){f.slider("setValue",70);if(b.is(":checked")){b.click()}console.log("Sent Volume reset to 70");console.log("Sent Sync reset to false")});chrome.storage.onChanged.addListener(function(i,h){for(key in i){var j=i[key];if(h==="sync"){if(key==="volume"&&b.is(":checked")){var g=j.newValue*100;f.slider("setValue",g);console.log("Update Volume by Sync to "+g)}else{console.log("Sync update is called but not applied.")}console.log('Storage key "%s" in namespace "%s" changed. Old value was "%s", new value is "%s".',key,h,j.oldValue,j.newValue)}}})})});